<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
        <template id="maintenance_checklist_template_view_temp_id">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="custom_bi_car_repair.checklist_template_view" />
                </t>
            </t>
        </template>

        <record id="manintenance_checklist_report_id" model="ir.actions.report">
            <field name="name">imprimir Checklist</field>
            <field name="model">maintenance.request</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">custom_bi_car_repair.maintenance_checklist_template_view_temp_id</field>
            <field name="report_file">custom_bi_car_repair.maintenance_checklist_template_view_temp_id</field>
            <field name="binding_type">report</field>
            <field name="binding_model_id" ref="model_maintenance_request" />

        </record>


        <template id="checklist_template_view">
            <t t-call="web.external_layout">
                <t t-set="o" t-value="doc.with_context({'lang':doc.partner_id.lang})" />

                <div class="page" style="margin-top:0px;">
                    <div class="row">
                        <div class="col-8" style="font-size:18px;">
                            <strong>CHECKLIST ORDEN DE TRABAJO # <span t-field="o.name" /></strong>
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        
                       
                        <div class="col-4">

                            <strong>
                                <i class="fa fa-car" aria-hidden="true" /> Vehículo </strong>
                            <br />
                            <span t-field="o.model" />
                            <span t-field="o.brand" />
                            <span t-field="o.year" />
                            <br />
                            <strong>Matricula:</strong>
                            <span t-field="o.license_plate" />
                            <br />
                            <strong> Color: </strong>
                            <span t-field="o.color" />
                            <br />
                            <t t-if="o.odometer">
                                <strong> Kilometraje: </strong>
                                <span t-field="o.odometer" />
                            </t>
                            <br />
                            <t t-if="o.close_date">
                                <strong>Fecha Liquidación: </strong>
                                <span t-esc="o.close_date.strftime('%d/%m/%Y')" />
                            </t>
                            <br />
                            <t t-if="o.user_id">
                                <strong> Técnico Asignado: </strong>
                                <span t-esc="o.user_id.name" />
                            </t>
                        </div>
                        <div class="col-4" style="text-align:right;">
                            <img t-if="o.image_brand" t-att-src="image_data_uri(o.image_brand)"
                                style="max-height: 45px;" alt="logo_brand" />
                        </div>
                    </div>
                    <br />


                    <div class="row">
                        <table class="table" style="max-height:14px;">
                            <thead>
                                <tr style="border-bottom: solid 1px;max-height:14px;">
                                    
                                    <th>
                                        Checklist
                                    </th>
                                    <th>Actividad</th>
                                    <th>
                                        Fecha
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="o.maintenance_line_checklist" t-as="line">
                                    <tr>
                                        <td>
                                            <input type="checkbox" t-att-checked="line.check"/>
                                            
                                        </td>
                                        <td>
                                            <span t-esc="line.activity" />
                                        </td>
                                        <td>
                                            <span t-esc="line.date.strftime('%d/%m/%Y')" />

                                        </td>
                                       
                                    </tr>


                                </t>

                            </tbody>
                        </table>
                    </div>


                </div>


            </t>
        </template>
    </data>
</odoo>